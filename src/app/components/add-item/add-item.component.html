<div class="add-item-container">
  <h2>Add New Menu Item</h2>

  <!-- Success Message -->
  <div *ngIf="successMessage" class="alert alert-success">
    {{ successMessage }}
  </div>

  <!-- Error Message -->
  <div *ngIf="errorMessage" class="alert alert-error">
    {{ errorMessage }}
  </div>

  <form [formGroup]="itemForm" (ngSubmit)="onSubmit()" class="item-form">
    
    <!-- Item Name -->
    <div class="form-group">
      <label for="name">Item Name *</label>
      <input 
        id="name"
        type="text"
        formControlName="name"
        class="form-control"
        [class.invalid]="name?.invalid && name?.touched"
        placeholder="Enter item name">
      <div *ngIf="name?.invalid && name?.touched" class="error-messages">
        <small *ngIf="name?.errors?.['required']">Item name is required</small>
        <small *ngIf="name?.errors?.['maxlength']">Item name cannot exceed 100 characters</small>
      </div>
    </div>

    <!-- Price -->
    <div class="form-group">
      <label for="price">Price ($) *</label>
      <input
        id="price"
        type="number"
        step="0.01"
        formControlName="price"
        class="form-control"
        [class.invalid]="price?.invalid && price?.touched"
        placeholder="0.00">
      <div *ngIf="price?.invalid && price?.touched" class="error-messages">
        <small *ngIf="price?.errors?.['required']">Price is required</small>
        <small *ngIf="price?.errors?.['min']">Price must be greater than 0</small>
        <small *ngIf="price?.errors?.['pattern']">Please enter a valid price</small>
      </div>
    </div>

    <!-- Image File -->
    <div class="form-group">
      <label for="image_url">Select Image *</label>
      <input 
        id="image_url"
        type="file"
        accept="image/*"
        (change)="onImageSelected($event)"
        class="form-control">
      <div *ngIf="image_url?.invalid && image_url?.touched" class="error-messages">
        <small *ngIf="image_url?.errors?.['required']">Image is required</small>
      </div>
      <!-- Preview -->
      <div *ngIf="imagePreviewUrl" class="image-preview">
        <img [src]="imagePreviewUrl" alt="Image Preview" width="200" />
      </div>
    </div>

    <!-- Expiry Date -->
    <div class="form-group">
      <label for="exp_date">Expiry Date *</label>
      <input 
        id="exp_date"
        type="date"
        formControlName="exp_date"
        class="form-control"
        [class.invalid]="exp_date?.invalid && exp_date?.touched">
      <div *ngIf="exp_date?.invalid && exp_date?.touched" class="error-messages">
        <small *ngIf="exp_date?.errors?.['required']">Expiry date is required</small>
        <small *ngIf="exp_date?.errors?.['pastDate']">Expiry date must be in the future</small>
      </div>
    </div>

    <!-- Submit -->
    <div class="form-actions">
      <button type="submit" class="btn btn-primary" [disabled]="itemForm.invalid">
        Add Item
      </button>
    </div>
  </form>
</div>
